import n,{useState as e,useRef as r,useEffect as t}from"react";function o(n,e,r,t){return new(r||(r=Promise))((function(o,a){function i(n){try{s(t.next(n))}catch(n){a(n)}}function l(n){try{s(t.throw(n))}catch(n){a(n)}}function s(n){var e;n.done?o(n.value):(e=n.value,e instanceof r?e:new r((function(n){n(e)}))).then(i,l)}s((t=t.apply(n,e||[])).next())}))}function a(n,e){var r,t,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){return function(l){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(i=0)),i;)try{if(r=1,t&&(o=2&l[0]?t.return:l[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,l[1])).done)return o;switch(t=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,t=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=e.call(n,i)}catch(n){l=[6,n],t=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,s])}}}function i(n,e,r){if(r||2===arguments.length)for(var t,o=0,a=e.length;o<a;o++)!t&&o in e||(t||(t=Array.prototype.slice.call(e,0,o)),t[o]=e[o]);return n.concat(t||Array.prototype.slice.call(e))}"function"==typeof SuppressedError&&SuppressedError;var l=function(){return n.createElement("svg",{width:"38",height:"43",viewBox:"0 0 39 45",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("ellipse",{cx:"19.0876",cy:"31.6055",rx:"15",ry:"12",stroke:"#393E46","stroke-width":"2"}),n.createElement("ellipse",{cx:"12.9473",cy:"30",rx:"2",ry:"3",stroke:"#393E46","stroke-width":"2"}),n.createElement("ellipse",{cx:"25.3245",cy:"30",rx:"2",ry:"3",stroke:"#393E46","stroke-width":"2"}),n.createElement("path",{opacity:"0.9",d:"M15.9934 37.6494L16.1075 37.7915C17.6441 39.7052 20.5881 39.6065 21.9932 37.5943V37.5943",stroke:"#393E46","stroke-width":"2","stroke-linecap":"round"}),n.createElement("path",{d:"M5 26.6143V26.6143C2.79086 26.6143 1 28.4051 1 30.6143V30.6143C1 32.8234 2.79086 34.6143 5 34.6143V34.6143",stroke:"#393E46","stroke-width":"2"}),n.createElement("path",{d:"M33 26.6143V26.6143C35.2091 26.6143 37 28.4051 37 30.6143V30.6143C37 32.8234 35.2091 34.6143 33 34.6143V34.6143",stroke:"#393E46","stroke-width":"2"}),n.createElement("line",{x1:"5",y1:"15",x2:"5",y2:"27",stroke:"#393E46","stroke-width":"2"}),n.createElement("circle",{cx:"4.72363",cy:"13.5",r:"1.5",stroke:"#393E46","stroke-width":"2"}),n.createElement("path",{d:"M24.2207 0.690976L30.1934 0.814611C34.8086 0.910144 38.5 4.67877 38.5 9.2949V10.5166C38.5 14.5264 35.2494 17.777 31.2396 17.777H28.8842C28.1186 17.777 27.3867 18.092 26.8603 18.6479C25.0763 20.5323 22.8385 21.9184 20.3683 22.6779C20.5968 22.4933 20.8224 22.2977 21.0369 22.0924C21.9522 21.2168 22.8019 20.0373 22.6001 18.6928C22.508 18.0788 21.9462 17.777 21.4662 17.777H19.2918C17.1976 17.777 15.5 16.0794 15.5 13.9852V9.23307C15.5 4.44518 19.4339 0.591888 24.2207 0.690976Z",fill:"white",stroke:"#393E46"}),n.createElement("line",{x1:"29.35",y1:"14.65",x2:"34.65",y2:"14.65",stroke:"#00ADB5","stroke-width":"0.7","stroke-linecap":"round"}),n.createElement("line",{x1:"27.35",y1:"12.65",x2:"34.65",y2:"12.65",stroke:"#00ADB5","stroke-width":"0.7","stroke-linecap":"round"}),n.createElement("line",{x1:"19.35",y1:"10.65",x2:"34.65",y2:"10.65",stroke:"#00ADB5","stroke-width":"0.7","stroke-linecap":"round"}),n.createElement("line",{x1:"19.35",y1:"8.65",x2:"34.65",y2:"8.65",stroke:"#00ADB5","stroke-width":"0.7","stroke-linecap":"round"}),n.createElement("line",{x1:"19.35",y1:"6.65",x2:"34.65",y2:"6.65",stroke:"#00ADB5","stroke-width":"0.7","stroke-linecap":"round"}),n.createElement("line",{x1:"27.35",y1:"4.65",x2:"34.65",y2:"4.65",stroke:"#00ADB5","stroke-width":"0.7","stroke-linecap":"round"}))};function s(n,e){void 0===e&&(e={});var r=e.insertAt;if(n&&"undefined"!=typeof document){var t=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===r&&t.firstChild?t.insertBefore(o,t.firstChild):t.appendChild(o),o.styleSheet?o.styleSheet.cssText=n:o.appendChild(document.createTextNode(n))}}s('/* Reset and base styles  */\r\n* {\r\n    padding: 0px;\r\n    margin: 0px;\r\n    border: none;\r\n  }\r\n  \r\n  *,\r\n  *::before,\r\n  *::after {\r\n    box-sizing: border-box;\r\n  }\r\n  \r\n  /* Links */\r\n  \r\n  a,\r\n  a:link,\r\n  a:visited {\r\n    text-decoration: none;\r\n  }\r\n  \r\n  a:hover {\r\n    text-decoration: none;\r\n  }\r\n  \r\n  /* Common */\r\n  \r\n  aside,\r\n  nav,\r\n  footer,\r\n  header,\r\n  section,\r\n  main {\r\n    display: block;\r\n  }\r\n  \r\n  h1,\r\n  h2,\r\n  h3,\r\n  h4,\r\n  h5,\r\n  h6,\r\n  p {\r\n    font-size: inherit;\r\n    font-weight: inherit;\r\n  }\r\n  \r\n  ul,\r\n  ul li {\r\n    list-style: none;\r\n  }\r\n  \r\n  img {\r\n    vertical-align: top;\r\n  }\r\n  \r\n  img,\r\n  svg {\r\n    max-width: 100%;\r\n    height: auto;\r\n  }\r\n  \r\n  address {\r\n    font-style: normal;\r\n  }\r\n  \r\n  /* Form */\r\n  \r\n  input,\r\n  textarea,\r\n  button,\r\n  select {\r\n    font-family: inherit;\r\n    font-size: inherit;\r\n    color: inherit;\r\n    background-color: transparent;\r\n  }\r\n  \r\n  input::-ms-clear {\r\n    display: none;\r\n  }\r\n  \r\n  button,\r\n  input[type="submit"] {\r\n    display: inline-block;\r\n    box-shadow: none;\r\n    background-color: transparent;\r\n    background: none;\r\n    cursor: pointer;\r\n  }\r\n  \r\n  input:focus,\r\n  input:active,\r\n  button:focus,\r\n  button:active {\r\n    outline: none;\r\n  }\r\n  \r\n  button::-moz-focus-inner {\r\n    padding: 0;\r\n    border: 0;\r\n  }\r\n  \r\n  label {\r\n    cursor: pointer;\r\n  }\r\n  \r\n  legend {\r\n    display: block;\r\n  }\r\n  ');s('@import url("https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap");\r\n.popup {\r\n  position: fixed;\r\n  right: 20px;\r\n  bottom: 0;\r\n}\r\n.popup__container {\r\n  width: 355px;\r\n}\r\n\r\n.popup__header {\r\n  width: 100%;\r\n  height: 83px;\r\n  background-color: #eeeeee;\r\n  display: flex;\r\n  position: relative;\r\n  justify-content: center;\r\n  align-items: center;\r\n  cursor: pointer;\r\n}\r\n\r\n.operator__info {\r\n  margin-left: 11px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.operator__info__name {\r\n  font-family: "Open Sans";\r\n  font-weight: 600;\r\n  font-size: 20px;\r\n  color: #393e46;\r\n}\r\n\r\n.operator__info__status {\r\n  font-family: "Open Sans";\r\n  font-weight: 400;\r\n  font-size: 16px;\r\n  color: #00adb5;\r\n}\r\n\r\n.popup__close__button {\r\n  position: absolute;\r\n  right: 17px;\r\n  top: 9px;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.popup__close__button:hover {\r\n  transform: scale(1.2);\r\n  filter: invert(48%) sepia(13%) saturate(3207%) hue-rotate(130deg)\r\n    brightness(95%) contrast(80%);\r\n}\r\n/* chat  */\r\n\r\n.chat {\r\n  height: 0;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.chat__active {\r\n  width: 100%;\r\n  height: 524px;\r\n  border: 1px solid #eeeeee;\r\n  transition: all 0.3s ease;\r\n  background-color: #fff;\r\n}\r\n\r\n.scrollbar {\r\n  overflow-y: scroll;\r\n  overflow-x: hidden;\r\n  height: 451px;\r\n}\r\n\r\n.scrollbar::-webkit-scrollbar {\r\n  width: 5px;\r\n  height: 10px;\r\n  border-radius: 20px;\r\n}\r\n\r\n.scrollbar::-webkit-scrollbar-thumb {\r\n  background: #888888;\r\n  border-radius: 20px;\r\n}\r\n\r\n.msg__block {\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  margin: 30px 25px 0px 25px;\r\n}\r\n\r\n/* msg user and operator */\r\n.chat__operator__msg {\r\n  display: inline-flex;\r\n  align-self: flex-start;\r\n  background-color: #eeeeee;\r\n  padding: 11px 17px;\r\n  border-radius: 0px 15px 15px 15px;\r\n  font-family: "Open Sans";\r\n  font-weight: 400;\r\n  font-size: 14px;\r\n  color: #000000;\r\n  margin-bottom: 20px;\r\n  word-break: break-all;\r\n}\r\n\r\n.chat__user__msg {\r\n  display: inline-flex;\r\n  align-self: flex-end;\r\n  background-color: #00adb5;\r\n  padding: 11px 17px;\r\n  border-radius: 15px 0px 15px 15px;\r\n  font-family: "Open Sans";\r\n  font-weight: 400;\r\n  font-size: 14px;\r\n  color: #fff;\r\n  margin-bottom: 20px;\r\n  word-break: break-all;\r\n}\r\n\r\n/* send message */\r\n\r\n.send__message__block {\r\n  border-top: 1px solid #eeeeee;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  height: 73px;\r\n  padding: 0px 17px;\r\n}\r\n\r\n.input__msg {\r\n  font-family: "Open Sans";\r\n  font-weight: 400;\r\n  font-size: 14;\r\n  border: none;\r\n  color: #393e46;\r\n  outline: none;\r\n}\r\n\r\n.input__msg::placeholder {\r\n  font-family: "Open Sans";\r\n  font-weight: 400;\r\n  font-size: 14;\r\n  color: #b9b9b9;\r\n}\r\n\r\n.send__msg {\r\n  outline: none;\r\n}\r\n\r\n.send__msg:active {\r\n  transition: all 0.3s ease;\r\n  transform: scale(0.8);\r\n  outline: none;\r\n}\r\n');var c=function(){return n.createElement("svg",{width:"25",height:"21",viewBox:"0 0 25 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M22.9834 7.59644L3.03322 0.824523C0.723783 0.0520304 -0.910708 3.05301 0.814919 4.71899L6.7472 10.4462L1.31257 16.6475C-0.26829 18.4514 1.61018 21.3062 3.84756 20.3438L23.1643 11.9343C24.8896 11.1015 24.772 8.28197 22.9834 7.59644Z",fill:"#00ADB5"}))},p=function(){return n.createElement("svg",{width:"17",height:"18",viewBox:"0 0 17 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.27653 8.79919L15.3576 17.4222C15.3576 17.4222 14.3627 17.4265 13.741 17.4222L8.77147 9.69959L1.61655 17.4222L0 17.4222L7.95544 9.02585L0.808317 0H2.05185L8.4889 7.95789L16.9742 0L9.27653 8.79919Z",fill:"#393E46"}))},u=function(n){return o(void 0,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,fetch("http://localhost:5001/api/messages/getUsersMessages",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({users_hex:["123",n]})}).then((function(n){return n.json()})).then((function(n){return n}))];case 1:return[2,e.sent()]}}))}))},d=function(n,e,r){return o(void 0,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,fetch("http://localhost:5001/api/messages/addUserMessage",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({from_hex:n,to_hex:e,message:r})})];case 1:return[2,t.sent()]}}))}))},f=function(s){s.operator_id;var f=e(!1),h=f[0],m=f[1],g=e([]),x=g[0],_=g[1],b=e(""),y=b[0],v=b[1],w=r(null);!function(){var n="0123456789ABCDEF",e="";if(!localStorage.getItem("UserID")){for(var r=0;r<16;r++)e+=n.charAt(Math.floor(16*Math.random()));localStorage.setItem("UserID",e)}}(),t((function(){u(k).then((function(n){_(n)})).catch((function(n){console.error(n)}));var n=setInterval((function(){u(k).then((function(n){_(n)})).catch((function(n){console.error(n)}))}),5e3);return function(){clearInterval(n)}}),[]),t((function(){!function(){var n;null===(n=w.current)||void 0===n||n.scrollIntoView({behavior:"smooth"})}()}),[x]);var k=String(localStorage.getItem("UserID"));return n.createElement("div",{className:"popup"},n.createElement("div",{className:"popup__container"},n.createElement("div",{onClick:function(){return m(!h)},className:"popup__header"},n.createElement(l,null),n.createElement("div",{className:"operator__info"},n.createElement("div",{className:"operator__info__name"},"Консультант"),n.createElement("div",{className:"operator__info__status"},"Онлайн")),h&&n.createElement("div",{className:"popup__close__button"},n.createElement(p,null))),n.createElement("div",{className:h?"chat__active":"chat"},n.createElement("div",{className:"chat__container"},n.createElement("div",{className:"scrollbar"},n.createElement("div",{className:"msg__block"},n.createElement("div",{className:"chat__operator__msg"},"Здравствуйте! Отдел продаж на связи. С радостью отвечу на Ваши вопросы."),x.map((function(e,r){return n.createElement("div",{key:r,className:"123"!==e.from_hex?"chat__user__msg":"chat__operator__msg"},e.message)})),n.createElement("div",{ref:w}))),n.createElement("div",{className:"send__message__block"},n.createElement("input",{value:y,className:"input__msg",placeholder:"Введите сообщение",onKeyDown:function(n){return function(n){13===n.keyCode&&""!==y&&(_(i(i([],x),[{message:y}])),d(k,"123",y).catch((function(n){console.error(n)})),v(""))}(n)},onChange:function(n){return v(n.target.value)}}),y&&n.createElement("button",{onClick:function(){return o(void 0,void 0,void 0,(function(){return a(this,(function(n){return""!==y&&(_(i(i([],x),[{message:y}])),d(k,"123",y).catch((function(n){console.error(n)})),v("")),[2]}))}))},className:"send__msg"},n.createElement(c,null)))))))};export{f as PopUp};
//# sourceMappingURL=index.js.map
